<ng-container *ngIf="fetchSummary;else elseback">
  <ng-container *ngTemplateOutlet="gridForm"></ng-container>
</ng-container>

<ng-template #elseback>
  <app-custom-card>
    <ng-container *ngTemplateOutlet="gridForm"></ng-container>
  </app-custom-card>
</ng-template>

<ng-template #gridForm>

  <div [class]="class">

    <div class="flex align-items-center justify-content-between">
      <div class="flex-grow-1">
        <app-criteria-builder
          #criteriaBuilder
          [form]="form"
          [colDefs]="columnDefs"
          [resetForm]="false"
          [icon]="'pi pi-search'"
          (onAddCriteria)="handleAddCriteria($event)"
        ></app-criteria-builder>
      </div>
      <app-grid-actions
        #gridActions
        [gridHistory]="gridHistory"
        [accessFormActions]="accessFormActions"
        [selectedRow]="selectedRow"
        [hasCriteria]="!!criteria"
        (clickHistory)="handleClickHistory($event)"
        (onAction)="handleOnAction($event)"
      ></app-grid-actions>
    </div>

    <ag-grid-angular
      #grid
      class="ag-theme-alpine"
      [columnDefs]="columnDefs"
      [gridOptions]="gridOptions"
      (rowDoubleClicked)="handleRowDbClicked($event)"
      (rowClicked)="handleRowClicked($event)"
      (sortChanged)="handleSortChange($event)"
    ></ag-grid-angular>

  </div>

</ng-template>
